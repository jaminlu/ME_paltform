{% extends "base.html" %}
{% block title %}
    IDC|机房信息
{% endblock %}

{% block breadcrumb  %}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>user management</h2>
            <ol class="breadcrumb">
                <li>
                    <a href={% url 'index' %}></a>
                </li>
                <li>
                    <a>Users</a>
                </li>
                <li class="active">
                    <strong>user management</strong>
                </li>
            </ol>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="wrapper">
      <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">机房信息</h3>
            </div>
            <div class="panel-body">
                    <form id="asset_form">
                        <div class="col-sm-1" style="padding-left: 0">
                            <!--模态对话框 点击保存资产-->
                            <a href="#"  class="btn btn-sm btn-primary" data-toggle="modal" data-target="#addmyModal"> 新增机房信息 </a>
                        </div>
                    
                        <!-- Modal -->
                            <div class="modal fade bs-example-modal-sm" id="addmyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                <div class="modal-dialog "  style="width:400px;;" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            <h4 class="modal-title" id="myModalLabel">新增机房信息</h4>
                                        </div>
                                        <div class="modal-body" style="height:600px;">
                                            <form method="post" action="{% url 'asset:idcadd' %}">
                                              <div class="form-group">
                                                  <label for="exampleInputEmail1">机房名字</label>
                                                  <input type="text" class="form-control" id="exampleInputEmail1" placeholder="机房名字，比如洛阳tw06三线">
                                              </div>
                                              <div class="form-group">
                                                <label for="exampleInputEmail1">机房标识</label>
                                                <input type="text" class="form-control" id="exampleInputEmail1" placeholder="机房标识，比如t06">
                                              </div>
                                              <div class="form-group">
                                                <label for="exampleInputPassword1">电信IP段</label>
                                                <input type="text" class="form-control" id="exampleInputPassword1" placeholder="IP段，比如101.71.7.0/26,没有可不填">
                                              </div>
                                              <div class="form-group">
                                                  <label for="exampleInputPassword1">联通IP段</label>
                                                  <input type="text" class="form-control" id="exampleInputPassword1" placeholder="IP段，比如101.71.7.0/26,没有可不填">
                                              </div>
                                              <div class="form-group">
                                                  <label for="exampleInputPassword1">移动IP段</label>
                                                  <input type="text" class="form-control" id="exampleInputPassword1" placeholder="IP段，比如101.71.7.0/26,没有可不填">
                                              </div>
                                              <div class="form-group">
                                                  <label for="exampleInputPassword1">DNS地址</label>
                                                  <input type="text" class="form-control" id="exampleInputPassword1" placeholder="DNS地址,没有可不填">
                                              </div>
                                                <div class="form-group">
                                                    <label for="exampleInputPassword1">email地址</label>
                                                    <input type="email" class="form-control" id="exampleInputPassword1" placeholder="机房联系邮箱,没有可不填">
                                                </div>
                                                <div class="form-group">
                                                    <label for="exampleInputPassword1">备注</label>
                                                    <input type="text" class="form-control" id="exampleInputPassword1" placeholder="备注">
                                                </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button href="{% url 'asset:assetinfo' %}" type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                            <button type="button" class="btn btn-primary">保存</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--模态对话框  结束-->
                        
                        <div class="col-sm-4" style="float: right">
                             <div class="input-group inline-group">
                                <input type="text" class="form-control m-b input-sm" id="search_input" name="keyword" value="" placeholder="Search">
                                <input type="text" style="display: none">
                                <div class="input-group-btn">
                                    <button id='search_btn' href="#" type="button" class="btn btn-sm btn-primary search-btn"  onclick="change_info()">
                                        - 搜索 -
                                    </button>
                                    <button type="button" href="#" name="export" class="btn btn-sm btn-success search-btn-excel" onclick="return false">
                                        - 导出 -
                                    </button>
                                </div>
                            </div>
                        </div>
                    
                        <table class="table table-striped table-bordered table-hover dataTables_filter " id="editable" name="editable">
                            <thead>
                                <tr class="button-primary">
                                    <th class="text-center">
                                        <input id="checkall" type="checkbox" class="i-checks" name="checkall">
                                    </th>
                                    <th class="text-center">机房名称</th>
                                    <th class="text-center">机房标识</th>
                                    <th class="text-center">电信IP</th>
                                    <th class="text-center">移动IP</th>
                                    <th class="text-center">联通IP</th>
                                    <th class="text-center">机房DNS</th>
                                    <th class="text-center">备注</th>
                                    <th class="text-center">机房地址</th>
                                    <th class="text-center">email</th>
                                    <th class="text-center">联系电话</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for idc in idc_info %}
                            <tr class="btn-default">
                               <td class="text-center" name="id" value="{{ asset.id }}" data-editable='false'>
                                        <input name="id" value="{{ asset.id }}" type="checkbox" class="i-checks">
                                    </td>
                                <td class="text-center">{{ idc_info.name }}</td>
                                <td class="text-center">{{ idc_info.idc_flag }}</td>
                                <td class="text-center">{{ idc_info.tel_ip }}</td>
                                <td class="text-center">{{ idc_info.mob_ip }}</td>
                                <td class="text-center">{{ idc_info.uni_ip }}</td>
                                <td class="text-center">{{ idc_info.dns }}</td>
                                <td class="text-center">{{ idc_info.comment }}</td>
                                <td class="text-center">{{ idc_info.address }}</td>
                                <td class="text-center">{{ idc_info.email }}</td>
                                    <td class="text-center" data-editable='false'>
                                        <a name="update" value="{{ asset.id }}" class=" btn btn-xs btn-warning">更新</a>
                                        <a href="{  }" class="btn btn-xs btn-info">详细</a>
                                    </td>
                            </tr>
                            </tbody>
                            {% endfor %}
                        </table>
                        </form>
            
                <div class="col-sm-6">
                    </div>
                        <div class="col-sm-6">
                                        <div class="dataTables_paginate paging_simple_numbers" id="editable_paginate">
                                            <ul class="pagination" style="margin-top: 0; float: right">
                                            {% if assets.has_previous %}
                                                    <li class="paginate_button previous disabled" aria-controls="editable" tabindex="0" id="editable_previous">
                                                         <a class="?page={{ assets.previous_page_number }}" href="#">Previous</a>
                                                    </li>
                                            {% endif %}
                                            {% if assets.has_next %}
                                                    <li class="paginate_button next disabled" aria-controls="editable" tabindex="0" id="editable_next">
                                                        <a class="page" href="#">Next</a>
                                                    </li>
                                                    {% endif %}

                                            </ul>
                                        </div>
                        </div>
                    </div>
                </div>
    </div>
    <!--管理资产列表js-->
    {% block assest_js %}
                            <script>
                            /*全选功能*/
                    $(document).ready(function() {
                        $("input[id=checkall]").click(
                                function () {
                                    if (this.checked) {
                                        $("input[type=checkbox]").prop('checked', true)
                                    } else {
                                        $("input[type=checkbox]").prop('checked', false)
                                    }
                                }
                        );
                        $("a[name='update']").click(function(){
                            var updateid = $(this).attr('value');
                             $.post("{   }", {updateid:JSON.stringify(updateid)},
                                                    function(callback){
                                                    });
                                            swal("更新!", "资产更新成功", "success");
                        })
                    });
                </script>
        {% endblock %}
{% endblock %}

